<!DOCTYPE html>
<html>
<head>
  <title>fimfic2epub-server</title>
</head>
<body>

<h1>fimfic2epub</h1>

<h2>Browser extension</h2>
Install for Google Chrome <a href="https://chrome.google.com/webstore/detail/fimfic2epub/fiijkoniocipeemlflajmmaecfhfcand">here</a>.
<br/>
To use it after install, go to a story page on fimfiction and press the EPUB download below the story's chapters. Wait a while for the EPUB to generate.


<h2>Bookmarklet</h2>
Drag this to your bookmarks:
<a href="" id="bookmarklet" onclick="return false">ðŸ“• fimfic2epub</a>
<br/>
To use it, go to a story page on fimfiction and click the bookmark. Wait a while for the EPUB to generate.

<h2>Direct story download</h2>

<form id="genform">
Fimfiction story id/url:<br/><input id="inputStory" name="inputStory" size=70/>
<br/>
<br/>
<button>Download story</button>
</form>
<br/>
After pressing download, wait a while for the EPUB to generate.
<br/>
<br/>
<hr/>
Read more about fimfic2epub <a href="https://github.com/daniel-j/fimfic2epub#readme">here</a>.
<br/>
Source code for this server is <a href="https://github.com/daniel-j/fimfic2epub-server">here</a>.

<script type="text/javascript">
  // converted with http://mrcoles.com/bookmarklet/
  // uses https://www.npmjs.com/package/bookmarklet
  var code = "javascript:(function()%7Bvar%20m%20%3D%20document.location.pathname.match(%2F%5E%5C%2Fstory%5C%2F(%5Cd*)%2F)%3Bif%20(m)%20%7Bvar%20storyId%20%3D%20m%5B1%5D%3Bdocument.location.href%20%3D%20'PROTOCOL%3A%2F%2FHOST%2Fstory%2F'%20%2B%20storyId%20%2B%20'%2Fdownload'%3B%7D%7D)()"

  document.getElementById('bookmarklet').href = code.replace('PROTOCOL', document.location.protocol.replace(':', '')).replace('HOST', escape(document.location.host))

  var genform = document.getElementById('genform')
  var inputStory = document.getElementById('inputStory')

  genform.addEventListener('submit', function (e) {
    e.preventDefault()
    var story = inputStory.value
    var storyId = ''
    if (isNaN(story)) {
      var m = story.match(/\/story\/(\d+)/)
      if (m) {
        storyId = m[1]
      }
    } else {
      storyId = story
    }
    if (isNaN(storyId) || storyId === '') {
      alert('Invalid story id/url')
    } else {
      document.location.href = '/story/' + storyId + '/download/fimfic_' + storyId + '.epub'
      inputStory.value = ''
    }
  }, false)
</script>

</body>
</html>
